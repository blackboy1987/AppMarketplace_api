"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[653],{98986:function($,S,e){var Y=e(26068),h=e.n(Y),Z=e(19648),m=e(28534),A=e(47892),i=e(91258),M=e(17976),D=function(y){var U=y.onSuccess,j={name:"file",multiple:!1,accept:"image/png",action:A.g.uploadUrl,showUploadList:!1,headers:{token:localStorage.getItem("token")||""},onChange:function(u){u.file.status!=="uploading"&&console.log(u.file,u.fileList),u.file.status==="done"?(Z.ZP.success("\u4E0A\u4F20\u6210\u529F").then(),U(u.file.response.data)):u.file.status==="error"&&Z.ZP.error("".concat(u.file.name," file upload failed."))}};return(0,M.jsx)(m.Z,h()(h()({},j),{},{children:(0,M.jsx)("span",{style:{cursor:"pointer"},children:"\u9009\u62E9\u6587\u4EF6"})}))};S.Z=D},85014:function($,S,e){e.r(S),e.d(S,{default:function(){return te}});var Y=e(48305),h=e.n(Y),Z=e(90228),m=e.n(Z),A=e(26068),i=e.n(A),M=e(87999),D=e.n(M),I=e(36982),y=e(47892);function U(s,a){return j.apply(this,arguments)}function j(){return j=D()(m()().mark(function s(a,d){return m()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,I.request)(y.g.apiUrl+"carousel/list",i()({method:"POST",data:i()(i()({},a),{},{pageNumber:a.current||1})},d||{})).then(function(o){return{success:!0,data:o.data.content,total:o.data.total}}));case 1:case"end":return r.stop()}},s)})),j.apply(this,arguments)}function W(s,a){return u.apply(this,arguments)}function u(){return u=D()(m()().mark(function s(a,d){var n;return m()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return n=i()({},a),n.rangeDate&&(n.beginDate=n.rangeDate[0].format("YYYY-MM-DD 00:00:00"),n.endDate=n.rangeDate[1].format("YYYY-MM-DD 23:59:59")),delete n.rangeDate,o.abrupt("return",(0,I.request)(y.g.apiUrl+(a.id?"carousel/update":"carousel/save"),i()({method:"POST",data:n},d||{})));case 4:case"end":return o.stop()}},s)})),u.apply(this,arguments)}function G(s,a){return B.apply(this,arguments)}function B(){return B=D()(m()().mark(function s(a,d){return m()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,I.request)(y.g.apiUrl+"carousel/delete",i()({method:"POST",data:a},d||{})));case 1:case"end":return r.stop()}},s)})),B.apply(this,arguments)}var N=e(73973),H=e(95173),J=e(3338),b=e(90926),O=e(19648),F=e(37593),x=e(91258),v=e(11653),K=e(31518),Q=e(47492),X=e(94708),k=e(98986),w=e(5726),T=e.n(w),t=e(17976),q={labelCol:{span:4},wrapperCol:{span:20}},_=function(a){var d=a.open,n=a.values,r=a.onClose,o=v.Z.useForm(),R=h()(o,1),c=R[0];return(0,x.useEffect)(function(){c.setFieldsValue(n||{}),Object.keys(n).length>0&&(c.setFieldsValue(n),c.setFieldsValue({rangeDate:[T()(n.beginDate||new Date),T()(n.endDate||new Date)]}))},[]),(0,t.jsx)(b.Z,{width:800,destroyOnClose:!0,maskClosable:!1,open:d,title:"\u6DFB\u52A0/\u4FEE\u6539\u8F6E\u64AD\u56FE",onOk:function(){c.validateFields().then(function(C){W(C).then(function(p){p.code===0?(O.ZP.success(p.msg).then(),r()):O.ZP.error(p.msg).then()})})},onCancel:r,children:(0,t.jsxs)(v.Z,i()(i()({form:c},q),{},{children:[(0,t.jsx)(v.Z.Item,{name:"id",style:{display:"none"},children:(0,t.jsx)(K.Z,{})}),(0,t.jsx)(v.Z.Item,{label:"\u56FE\u7247",name:"image",rules:[{required:!0,message:"\u5FC5\u586B"}],children:(0,t.jsx)(K.Z.Search,{enterButton:(0,t.jsx)(k.Z,{onSuccess:function(C){return c.setFieldsValue({image:C})}})})}),(0,t.jsx)(v.Z.Item,{label:"\u8DF3\u8F6C\u5730\u5740",name:"url",children:(0,t.jsx)(K.Z,{})}),(0,t.jsx)(v.Z.Item,{label:"\u6709\u6548\u65F6\u95F4",name:"rangeDate",rules:[{required:!0,message:"\u5FC5\u586B"}],children:(0,t.jsx)(Q.default.RangePicker,{format:"YYYY-MM-DD"})}),(0,t.jsx)(v.Z.Item,{label:"\u5E8F\u53F7",name:"order",rules:[{required:!0,message:"\u5FC5\u586B"}],children:(0,t.jsx)(X.Z,{min:1,step:1,precision:0})})]}))})},ee=_,te=function(){var s=(0,x.useRef)(),a=(0,x.useState)({}),d=h()(a,2),n=d[0],r=d[1],o=(0,x.useState)(!1),R=h()(o,2),c=R[0],E=R[1],C=(0,x.useState)([]),p=h()(C,2),L=p[0],ne=p[1],z=function(l){b.Z.confirm({title:"\u63D0\u9192",content:"\u60A8\u6B63\u5728\u5220\u9664\u6570\u636E",onOk:function(){G({ids:l||L.join(",")}).then(function(P){if(P.code===0){var V;O.ZP.success(P.msg).then(),(V=s.current)===null||V===void 0||V.reload()}else O.ZP.error(P.msg).then()})}})},ae=[{title:"\u56FE\u7247",dataIndex:"image",valueType:"image",hideInSearch:!0,fieldProps:{width:100}},{title:"\u8DF3\u8F6C\u5730\u5740",dataIndex:"url",hideInSearch:!0,width:80,renderText:function(l,f){return(0,t.jsx)("a",{href:f.url,target:"_blank",rel:"noreferrer",children:"\u67E5\u770B"})}},{title:"\u6709\u6548\u65F6\u95F4",dataIndex:"beginDate",hideInSearch:!0,width:180,renderText:function(l,f){return(0,t.jsxs)("span",{children:[T()(f.beginDate).format("YYYY-MM-DD"),"~",T()(f.endDate).format("YYYY-MM-DD")]})}},{title:"\u5E8F\u53F7",dataIndex:"order",hideInSearch:!0,width:50},{title:"\u64CD\u4F5C",dataIndex:"opt",width:60,valueType:"option",render:function(l,f){return[(0,t.jsx)(F.ZP,{size:"small",type:"primary",onClick:function(){E(!0),r(f)},children:"\u4FEE\u6539"},"edit"),(0,t.jsx)(F.ZP,{size:"small",type:"primary",danger:!0,onClick:function(){return z(f.id)},children:"\u5220\u9664"},"remove")]}}];return(0,t.jsxs)(H._z,{title:!1,children:[(0,t.jsx)(J.Z,{actionRef:s,options:!1,rowKey:"id",search:!1,bordered:!0,size:"small",tableAlertRender:!1,rowSelection:{selectedRowKeys:L,onChange:function(l){return ne(l)}},toolBarRender:function(){return[(0,t.jsxs)(F.ZP,{type:"primary",onClick:function(){return E(!0)},children:[(0,t.jsx)(N.Z,{})," \u65B0\u589E"]},"add"),(0,t.jsx)(F.ZP,{disabled:L.length===0,type:"primary",danger:!0,onClick:function(){return z()},children:"\u5220\u9664"},"remove")]},request:U,columns:ae}),c?(0,t.jsx)(ee,{values:n,open:c,onClose:function(){var l;E(!1),(l=s.current)===null||l===void 0||l.reload(),r({})}}):null]})}}}]);
