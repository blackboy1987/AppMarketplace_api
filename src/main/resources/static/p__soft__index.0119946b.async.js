"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[544],{73367:function(X,T,e){e.d(T,{Z:function(){return E}});var M=e(57260),l=e(91258),x={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},v=x,b=e(63506),j=function(S,R){return l.createElement(b.Z,(0,M.Z)({},S,{ref:R,icon:v}))},C=l.forwardRef(j),E=C},38561:function(X,T,e){e.r(T),e.d(T,{default:function(){return Ze}});var M=e(48305),l=e.n(M),x=e(96689),v=e(48235),b=e(64771),j=e(38130),C=e(49419),E=e(16426),_=e(73367),S=e(73973),R=e(95173),I=e(3338),w=e(90926),O=e(19648),y=e(37593),B=e(6116),W=e(32256),U=e(56225),i=e(72891),n=e(91258),Z=e(26068),u=e.n(Z),a=e(11653),V=e(31518),ie=e(42498),de=e(94708),t=e(17976),ce={labelCol:{span:4},wrapperCol:{span:20}},me=function(s){var m=s.open,o=s.values,r=s.onClose,g=a.Z.useForm(),A=l()(g,1),L=A[0],z=(0,n.useState)([]),N=l()(z,2),H=N[0],J=N[1];return(0,n.useEffect)(function(){L.setFieldsValue(o||{}),(0,x.G_)().then(function(F){J(F.data)})},[]),(0,t.jsx)(w.Z,{destroyOnClose:!0,maskClosable:!1,open:m,title:"\u6DFB\u52A0\u6D3B\u52A8",onOk:function(){L.validateFields().then(function(K){(0,x.a1)(K).then(function(P){P.code===0?(O.ZP.success(P.msg).then(),r()):O.ZP.error(P.msg).then()})})},onCancel:r,children:(0,t.jsxs)(a.Z,u()(u()({form:L},ce),{},{children:[(0,t.jsx)(a.Z.Item,{name:"id",style:{display:"none"},children:(0,t.jsx)(V.Z,{})}),(0,t.jsx)(a.Z.Item,{label:"\u4E0A\u7EA7\u5206\u7C7B",name:"parentId",children:(0,t.jsx)(ie.Z,{disabled:o.id,showSearch:!0,filterTreeNode:function(K,P){return P.title.indexOf(K)>=0},style:{width:"100%"},treeDefaultExpandAll:!0,fieldNames:{label:"title",value:"key"},treeData:H})}),(0,t.jsx)(a.Z.Item,{label:"\u5206\u7C7B",name:"name",rules:[{required:!0,message:"\u5FC5\u586B"}],children:(0,t.jsx)(V.Z,{})}),(0,t.jsx)(a.Z.Item,{label:"\u5E8F\u53F7",name:"order",children:(0,t.jsx)(de.Z,{min:0,style:{width:"100%"}})})]}))})},fe=me,he=e(90228),G=e.n(he),pe=e(87999),q=e.n(pe),ee=e(36982),te=e(47892);function ve(d,s){return k.apply(this,arguments)}function k(){return k=q()(G()().mark(function d(s,m){return G()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,ee.request)(te.g.apiUrl+"softDownloadLog/list",u()({method:"POST",data:u()(u()({},s),{},{pageNumber:s.current||1})},m||{})).then(function(g){return{success:!0,data:g.data.content,total:g.data.total}}));case 1:case"end":return r.stop()}},d)})),k.apply(this,arguments)}var ye=function(s){var m=s.open,o=s.values,r=s.onClose,g=(0,n.useRef)(),A=[{title:"\u7528\u6237",width:60,hideInSearch:!0,dataIndex:"username"},{title:"\u64CD\u4F5C\u65F6\u95F4",dataIndex:"createdDate",hideInSearch:!0,width:150,valueType:"dateTime"}];return(0,t.jsx)(w.Z,{width:"80%",style:{top:"1%"},destroyOnClose:!0,maskClosable:!1,open:m,title:"".concat(o.name," \u4E0B\u8F7D\u8BB0\u5F55"),footer:null,onCancel:r,children:(0,t.jsx)(I.Z,{actionRef:g,options:!1,cardProps:!1,rowKey:"id",bordered:!0,search:!1,size:"small",tableAlertRender:!1,params:{softId:o.id},request:ve,scroll:{y:window.innerHeight-340},columns:A})})},ge=ye;function xe(d,s){return Y.apply(this,arguments)}function Y(){return Y=q()(G()().mark(function d(s,m){return G()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,ee.request)(te.g.apiUrl+"softViewLog/list",u()({method:"POST",data:u()(u()({},s),{},{pageNumber:s.current||1})},m||{})).then(function(g){return{success:!0,data:g.data.content,total:g.data.total}}));case 1:case"end":return r.stop()}},d)})),Y.apply(this,arguments)}var je=function(d){var s=d.softId,m=(0,n.useRef)(),o=[{title:"\u8F6F\u4EF6\u540D",dataIndex:"name"},{title:"\u7528\u6237",width:60,hideInSearch:!0,dataIndex:"username"},{title:"\u64CD\u4F5C\u65F6\u95F4",dataIndex:"createdDate",hideInSearch:!0,width:150,valueType:"dateTime"}];return(0,t.jsx)(R._z,{title:!1,children:(0,t.jsx)(I.Z,{actionRef:m,options:!1,rowKey:"id",bordered:!0,size:"small",tableAlertRender:!1,params:{softId:s},request:xe,scroll:{y:window.innerHeight-340},columns:o})})},Ce=function(s){var m=s.open,o=s.values,r=s.onClose;return(0,n.useEffect)(function(){},[]),(0,t.jsx)(w.Z,{width:"80%",style:{top:"1%"},destroyOnClose:!0,maskClosable:!1,open:m,title:"".concat(o.name," \u6D4F\u89C8\u8BB0\u5F55"),footer:null,onCancel:r,children:(0,t.jsx)(je,{softId:o.id})})},Oe=Ce,Ze=function(){var d=(0,n.useRef)(),s=(0,n.useState)({}),m=l()(s,2),o=m[0],r=m[1],g=(0,n.useState)(!1),A=l()(g,2),L=A[0],z=A[1],N=(0,n.useState)([]),H=l()(N,2),J=H[0],F=H[1],K=(0,n.useState)(null),P=l()(K,2),Ee=P[0],ne=P[1],De=(0,n.useState)(!1),ae=l()(De,2),se=ae[0],re=ae[1],Pe=(0,n.useState)(!1),le=l()(Pe,2),oe=le[0],ue=le[1];(0,n.useEffect)(function(){(0,x.G_)().then(function(D){F(D.data)})},[]);var Se=function(p){w.Z.confirm({title:"\u63D0\u9192",content:"\u60A8\u6B63\u5728\u5220\u9664\u6570\u636E",onOk:function(){(0,x.Od)({ids:p}).then(function(f){if(f.code===0){var c;O.ZP.success(f.msg).then(),(c=d.current)===null||c===void 0||c.reload()}else O.ZP.error(f.msg).then()})}})},$=function(p,h){w.Z.confirm({title:"\u63D0\u9192",content:"\u60A8\u6B63\u5728\u5BA1\u6838\u6570\u636E",onOk:function(){(0,x.Uk)({ids:p,status:h}).then(function(c){if(c.code===0){var Q;O.ZP.success(c.msg).then(),(Q=d.current)===null||Q===void 0||Q.reload()}else O.ZP.error(c.msg).then()})}})},Ie=[{title:"logo",dataIndex:"logo",width:80,hideInSearch:!0,valueType:"image",fieldProps:{width:60}},{title:"\u8F6F\u4EF6\u540D",dataIndex:"name"},{title:"\u72B6\u6001",dataIndex:"status",width:60,valueEnum:{0:{text:"\u5F85\u5BA1\u6838"},1:{text:"\u5DF2\u901A\u8FC7"},2:{text:"\u5DF2\u62D2\u7EDD"},100:{text:"\u8349\u7A3F"},101:{text:"\u5DF2\u5220\u9664"},102:{text:"\u5DF2\u5220\u9664"}}},{title:"\u7528\u6237",width:60,hideInSearch:!0,dataIndex:"username"},{title:"\u6DFB\u52A0\u65F6\u95F4",dataIndex:"createdDate",hideInSearch:!0,width:150,valueType:"dateTime"},{title:"\u64CD\u4F5C",dataIndex:"opt",width:180,valueType:"option",render:function(p,h){var f=[];return f.push((0,t.jsx)(y.ZP,{size:"small",type:"primary",onClick:function(){z(!0),r(h)},icon:(0,t.jsx)(v.Z,{})},"edit")),f.push((0,t.jsx)(y.ZP,{size:"small",type:"primary",danger:!0,onClick:function(){return Se(h.id)},icon:(0,t.jsx)(b.Z,{})},"remove")),h.status==0?(f.push((0,t.jsx)(y.ZP,{size:"small",type:"primary",onClick:function(){return $(h.id,1)},icon:(0,t.jsx)(j.Z,{})},"pass")),f.push((0,t.jsx)(y.ZP,{size:"small",type:"primary",danger:!0,onClick:function(){return $(h.id,2)},icon:(0,t.jsx)(C.Z,{})},"reject"))):h.status==1?f.push((0,t.jsx)(y.ZP,{size:"small",type:"primary",danger:!0,onClick:function(){return $(h.id,2)},icon:(0,t.jsx)(C.Z,{})},"reject")):f.push((0,t.jsx)(y.ZP,{size:"small",type:"primary",onClick:function(){return $(h.id,1)},icon:(0,t.jsx)(j.Z,{})},"pass")),f.push((0,t.jsx)(y.ZP,{size:"small",type:"primary",onClick:function(){ue(!0),r(h)},icon:(0,t.jsx)(E.Z,{})},"edit")),f.push((0,t.jsx)(y.ZP,{size:"small",type:"primary",onClick:function(){re(!0),r(h)},icon:(0,t.jsx)(_.Z,{})},"edit")),f}}];return(0,t.jsxs)(R._z,{title:!1,children:[(0,t.jsxs)(B.Z,{gutter:16,children:[(0,t.jsx)(W.Z,{span:4,children:(0,t.jsx)(U.Z,{size:"small",children:(0,t.jsx)(i.Z,{showLine:!0,blockNode:!0,defaultExpandAll:!0,style:{height:window.innerHeight-120,overflowY:"auto"},treeData:J,onSelect:function(p){p.length>0?ne(p[0]):ne(null)}})})}),(0,t.jsx)(W.Z,{span:20,children:(0,t.jsx)(I.Z,{actionRef:d,options:!1,rowKey:"id",bordered:!0,size:"small",tableAlertRender:!1,toolBarRender:function(){return[(0,t.jsxs)(y.ZP,{type:"primary",onClick:function(){return z(!0)},children:[(0,t.jsx)(S.Z,{})," \u65B0\u589E"]},"add")]},params:{categoryId:Ee},request:x.pb,scroll:{y:window.innerHeight-340},columns:Ie})})]}),L?(0,t.jsx)(fe,{values:o,open:L,onClose:function(){var p;z(!1),(p=d.current)===null||p===void 0||p.reload(),r({})}}):null,se&&Object.keys(o).length>0?(0,t.jsx)(ge,{values:o,open:se,onClose:function(){re(!1),r({})}}):null,oe&&Object.keys(o).length>0?(0,t.jsx)(Oe,{values:o,open:oe,onClose:function(){ue(!1),r({})}}):null]})}},96689:function(X,T,e){e.d(T,{G_:function(){return y},Od:function(){return w},Uk:function(){return W},a1:function(){return R},pb:function(){return _}});var M=e(90228),l=e.n(M),x=e(26068),v=e.n(x),b=e(87999),j=e.n(b),C=e(36982),E=e(47892);function _(i,n){return S.apply(this,arguments)}function S(){return S=j()(l()().mark(function i(n,Z){return l()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,C.request)(E.g.apiUrl+"soft/list",v()({method:"POST",data:v()(v()({},n),{},{pageNumber:n.current||1})},Z||{})).then(function(V){return{success:!0,data:V.data.content,total:V.data.total}}));case 1:case"end":return a.stop()}},i)})),S.apply(this,arguments)}function R(i,n){return I.apply(this,arguments)}function I(){return I=j()(l()().mark(function i(n,Z){return l()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,C.request)(E.g.apiUrl+(n.id?"soft/update":"soft/save"),v()({method:"POST",data:n},Z||{})));case 1:case"end":return a.stop()}},i)})),I.apply(this,arguments)}function w(i,n){return O.apply(this,arguments)}function O(){return O=j()(l()().mark(function i(n,Z){return l()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,C.request)(E.g.apiUrl+"soft/delete",v()({method:"POST",data:n},Z||{})));case 1:case"end":return a.stop()}},i)})),O.apply(this,arguments)}function y(i){return B.apply(this,arguments)}function B(){return B=j()(l()().mark(function i(n){return l()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,C.request)(E.g.apiUrl+"soft/tree",v()({method:"POST"},n||{})));case 1:case"end":return u.stop()}},i)})),B.apply(this,arguments)}function W(i,n){return U.apply(this,arguments)}function U(){return U=j()(l()().mark(function i(n,Z){return l()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,C.request)(E.g.apiUrl+(n.status==1?"soft/pass":"soft/reject"),v()({method:"POST",data:n},Z||{})));case 1:case"end":return a.stop()}},i)})),U.apply(this,arguments)}}}]);
