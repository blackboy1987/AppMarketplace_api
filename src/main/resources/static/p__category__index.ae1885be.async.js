"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[133],{63935:function(de,$,e){e.r($),e.d($,{default:function(){return le}});var K=e(48305),f=e.n(K),L=e(90228),o=e.n(L),w=e(26068),i=e.n(w),J=e(87999),Z=e.n(J),j=e(36982),C=e(47892);function Q(r,a){return F.apply(this,arguments)}function F(){return F=Z()(o()().mark(function r(a,s){return o()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,j.request)(C.g.apiUrl+"category/list",i()({method:"POST",data:i()(i()({},a),{},{pageNumber:a.current||1})},s||{})).then(function(h){return{success:!0,data:h.data,total:h.data.length}}));case 1:case"end":return n.stop()}},r)})),F.apply(this,arguments)}function W(r,a){return O.apply(this,arguments)}function O(){return O=Z()(o()().mark(function r(a,s){return o()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,j.request)(C.g.apiUrl+(a.id?"category/update":"category/save"),i()({method:"POST",data:a},s||{})));case 1:case"end":return n.stop()}},r)})),O.apply(this,arguments)}function X(r,a){return E.apply(this,arguments)}function E(){return E=Z()(o()().mark(function r(a,s){return o()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,j.request)(C.g.apiUrl+"category/delete",i()({method:"POST",data:a},s||{})));case 1:case"end":return n.stop()}},r)})),E.apply(this,arguments)}function U(r){return R.apply(this,arguments)}function R(){return R=Z()(o()().mark(function r(a){return o()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,j.request)(C.g.apiUrl+"category/tree",i()({method:"POST"},a||{})));case 1:case"end":return l.stop()}},r)})),R.apply(this,arguments)}var Y=e(73973),b=e(95173),k=e(3338),V=e(90926),I=e(19648),D=e(37593),q=e(6116),G=e(32256),_=e(56225),ee=e(72891),d=e(91258),m=e(11653),H=e(31518),te=e(42498),ne=e(94708),t=e(17976),ae={labelCol:{span:4},wrapperCol:{span:20}},re=function(a){var s=a.open,l=a.values,n=a.onClose,h=m.Z.useForm(),P=f()(h,1),v=P[0],g=(0,d.useState)([]),T=f()(g,2),A=T[0],B=T[1];return(0,d.useEffect)(function(){v.setFieldsValue(l||{}),U().then(function(y){B(y.data)})},[]),(0,t.jsx)(V.Z,{destroyOnClose:!0,maskClosable:!1,open:s,title:"\u6DFB\u52A0\u6D3B\u52A8",onOk:function(){v.validateFields().then(function(x){W(x).then(function(c){c.code===0?(I.ZP.success(c.msg).then(),n()):I.ZP.error(c.msg).then()})})},onCancel:n,children:(0,t.jsxs)(m.Z,i()(i()({form:v},ae),{},{children:[(0,t.jsx)(m.Z.Item,{name:"id",style:{display:"none"},children:(0,t.jsx)(H.Z,{})}),(0,t.jsx)(m.Z.Item,{label:"\u4E0A\u7EA7\u5206\u7C7B",name:"parentId",children:(0,t.jsx)(te.Z,{showSearch:!0,filterTreeNode:function(x,c){return c.title.indexOf(x)>=0},style:{width:"100%"},treeDefaultExpandAll:!0,fieldNames:{label:"title",value:"key"},treeData:A})}),(0,t.jsx)(m.Z.Item,{label:"\u5206\u7C7B",name:"name",rules:[{required:!0,message:"\u5FC5\u586B"}],children:(0,t.jsx)(H.Z,{})}),(0,t.jsx)(m.Z.Item,{label:"\u5E8F\u53F7",name:"order",children:(0,t.jsx)(ne.Z,{min:0,style:{width:"100%"}})})]}))})},se=re,le=function(){var r=(0,d.useRef)(),a=(0,d.useState)({}),s=f()(a,2),l=s[0],n=s[1],h=(0,d.useState)(!1),P=f()(h,2),v=P[0],g=P[1],T=(0,d.useState)([]),A=f()(T,2),B=A[0],y=A[1],x=(0,d.useState)(0),c=f()(x,2),ue=c[0],M=c[1];(0,d.useEffect)(function(){U().then(function(p){y(p.data)})},[]);var oe=function(u){V.Z.confirm({title:"\u63D0\u9192",content:"\u60A8\u6B63\u5728\u5220\u9664\u6570\u636E",onOk:function(){X({ids:u}).then(function(S){if(S.code===0){var N;I.ZP.success(S.msg).then(),(N=r.current)===null||N===void 0||N.reload()}else I.ZP.error(S.msg).then()})}})},ie=[{title:"\u5206\u7C7B\u540D",dataIndex:"name"},{title:"\u5E8F\u53F7",dataIndex:"orders",hideInSearch:!0},{title:"\u6DFB\u52A0\u65F6\u95F4",dataIndex:"createdDate",hideInSearch:!0,width:150,valueType:"dateTime"},{title:"\u64CD\u4F5C",dataIndex:"opt",width:120,valueType:"option",render:function(u,z){return[(0,t.jsx)(D.ZP,{size:"small",type:"primary",onClick:function(){g(!0),n(z)},children:"\u4FEE\u6539"},"edit"),(0,t.jsx)(D.ZP,{size:"small",type:"primary",danger:!0,onClick:function(){return oe(z.id)},children:"\u5220\u9664"},"remove")]}}];return(0,t.jsxs)(b._z,{title:!1,children:[(0,t.jsxs)(q.Z,{gutter:16,children:[(0,t.jsx)(G.Z,{span:4,children:(0,t.jsx)(_.Z,{size:"small",children:(0,t.jsx)(ee.Z,{style:{height:window.innerHeight-160},blockNode:!0,defaultExpandAll:!0,treeData:B,showLine:!0,onSelect:function(u){u.length>0?M(u[0]):M(0)}})})}),(0,t.jsx)(G.Z,{span:20,children:(0,t.jsx)(k.Z,{actionRef:r,options:!1,rowKey:"id",bordered:!0,search:!1,size:"small",tableAlertRender:!1,toolBarRender:function(){return[(0,t.jsxs)(D.ZP,{type:"primary",onClick:function(){return g(!0)},children:[(0,t.jsx)(Y.Z,{})," \u65B0\u589E"]},"add")]},params:{parentId:ue},request:Q,pagination:!1,scroll:{y:window.innerHeight-220},columns:ie})})]}),v?(0,t.jsx)(se,{values:l,open:v,onClose:function(){var u;g(!1),(u=r.current)===null||u===void 0||u.reload(),n({})}}):null]})}}}]);
