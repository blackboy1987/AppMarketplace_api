"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[174],{98986:function(b,y,n){var P=n(26068),a=n.n(P),j=n(19648),d=n(28534),x=n(47892),f=n(91258),_=n(17976),r=function(h){var O=h.onSuccess,E={name:"file",multiple:!1,accept:"image/png",action:x.g.uploadUrl,showUploadList:!1,headers:{token:localStorage.getItem("token")||""},onChange:function(e){e.file.status!=="uploading"&&console.log(e.file,e.fileList),e.file.status==="done"?(j.ZP.success("\u4E0A\u4F20\u6210\u529F").then(),O(e.file.response.data)):e.file.status==="error"&&j.ZP.error("".concat(e.file.name," file upload failed."))}};return(0,_.jsx)(d.Z,a()(a()({},E),{},{children:(0,_.jsx)("span",{style:{cursor:"pointer"},children:"\u9009\u62E9\u6587\u4EF6"})}))};y.Z=r},25982:function(b,y,n){n.r(y),n.d(y,{default:function(){return s}});var P=n(26068),a=n.n(P),j=n(48305),d=n.n(j),x=n(95173),f=n(24162),_=n(91258),r=n(11653),c=n(31518),h=n(94708),O=n(42498),E=n(37593),C=n(19648),e=n(17976),Z=function(i){var t=i.value,g=i.onChange;return(0,_.useEffect)(function(){if(window.UE){var v=window.UE.getEditor("container",{});v.ready(function(){v.setContent(t||"")}),v.addListener("contentChange",function(){g&&g(v.getContent())})}else console.log("\u7F16\u8F91\u5668\u52A0\u8F7D\u5931\u8D25");return function(){window.UE.getEditor("container").destroy()}},[]),(0,e.jsx)("div",{children:(0,e.jsx)("div",{style:{display:"flex"},id:"container"})})},D=Z,M=n(96689),p=n(98986),u={labelCol:{xs:{span:6}},wrapperCol:{xs:{span:18}}},s=function(){var m=r.Z.useForm(),i=d()(m,1),t=i[0],g=(0,_.useState)([]),v=d()(g,2),U=v[0],I=v[1];return(0,_.useEffect)(function(){(0,M.G_)({}).then(function(l){I(l.data)})},[]),(0,e.jsxs)(x._z,{title:!1,breadcrumb:{},children:[(0,e.jsxs)(r.Z,a()(a()({form:t},u),{},{scrollToFirstError:!0,children:[(0,e.jsx)(r.Z.Item,{label:"\u8F6F\u4EF6\u540D\u79F0",name:"name",rules:[{required:!0,message:"\u5FC5\u586B"}],children:(0,e.jsx)(c.Z,{})}),(0,e.jsx)(r.Z.Item,{label:"\u8F6F\u4EF6\u56FE\u6807",name:"logo",rules:[{required:!0,message:"\u5FC5\u586B"}],children:(0,e.jsx)(c.Z,{addonAfter:(0,e.jsx)(p.Z,{onSuccess:function(o){t.setFieldValue("logo",o)}})})}),(0,e.jsx)(r.Z.Item,{label:"\u8F6F\u4EF6\u5927\u5C0F",name:"size",rules:[{required:!0,message:"\u5FC5\u586B"}],children:(0,e.jsx)(h.Z,{})}),(0,e.jsx)(r.Z.Item,{label:"\u5730\u57401",name:"downloadUrl1",rules:[{required:!0,message:"\u5FC5\u586B"}],children:(0,e.jsx)(c.Z,{})}),(0,e.jsx)(r.Z.Item,{label:"\u5730\u57402",name:"downloadUrl2",rules:[{required:!0,message:"\u5FC5\u586B"}],children:(0,e.jsx)(c.Z,{})}),(0,e.jsx)(r.Z.Item,{label:"\u56FE\u72471",name:"img1",rules:[{required:!0,message:"\u5FC5\u586B"}],children:(0,e.jsx)(c.Z,{addonAfter:(0,e.jsx)(p.Z,{onSuccess:function(o){t.setFieldValue("img1",o)}})})}),(0,e.jsx)(r.Z.Item,{label:"\u56FE\u72472",name:"img2",rules:[{required:!0,message:"\u5FC5\u586B"}],children:(0,e.jsx)(c.Z,{addonAfter:(0,e.jsx)(p.Z,{onSuccess:function(o){t.setFieldValue("img1",o)}})})}),(0,e.jsx)(r.Z.Item,{label:"\u56FE\u72473",name:"img3",rules:[{required:!0,message:"\u5FC5\u586B"}],children:(0,e.jsx)(c.Z,{addonAfter:(0,e.jsx)(p.Z,{onSuccess:function(o){t.setFieldValue("img1",o)}})})}),(0,e.jsx)(r.Z.Item,{label:"\u5206\u7C7B",name:"categoryId",rules:[{required:!0,message:"\u5FC5\u586B"}],children:(0,e.jsx)(O.Z,{showSearch:!0,style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},allowClear:!0,treeLine:!0,treeData:U.map(function(l){return l.children&&l.children.length>0?{value:l.key,title:l.title,disabled:!0,children:l.children.map(function(o){return{value:o.key,title:o.title}})}:{value:l.key,title:l.title}}),treeDefaultExpandAll:!0})}),(0,e.jsx)(r.Z.Item,{name:"content",style:{display:"none"},children:(0,e.jsx)(c.Z,{})}),(0,e.jsx)(D,{value:"",onChange:function(o){t.setFieldValue("content",o)}})]})),(0,e.jsx)(f.S,{children:(0,e.jsx)(E.ZP,{type:"primary",onClick:function(){t.validateFields().then(function(o){(0,M.a1)(o).then(function(F){F.code?(C.ZP.success(F.data),t.resetFields()):C.ZP.error("\u6DFB\u52A0\u5931\u8D25")})})},children:"\u4FDD\u5B58"})})]})}},96689:function(b,y,n){n.d(y,{G_:function(){return Z},Od:function(){return C},Uk:function(){return M},a1:function(){return O},pb:function(){return c}});var P=n(90228),a=n.n(P),j=n(26068),d=n.n(j),x=n(87999),f=n.n(x),_=n(36982),r=n(47892);function c(u,s){return h.apply(this,arguments)}function h(){return h=f()(a()().mark(function u(s,m){return a()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,_.request)(r.g.apiUrl+"soft/list",d()({method:"POST",data:d()(d()({},s),{},{pageNumber:s.current||1})},m||{})).then(function(g){return{success:!0,data:g.data.content,total:g.data.total}}));case 1:case"end":return t.stop()}},u)})),h.apply(this,arguments)}function O(u,s){return E.apply(this,arguments)}function E(){return E=f()(a()().mark(function u(s,m){return a()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,_.request)(r.g.apiUrl+(s.id?"soft/update":"soft/save"),d()({method:"POST",data:s},m||{})));case 1:case"end":return t.stop()}},u)})),E.apply(this,arguments)}function C(u,s){return e.apply(this,arguments)}function e(){return e=f()(a()().mark(function u(s,m){return a()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,_.request)(r.g.apiUrl+"soft/delete",d()({method:"POST",data:s},m||{})));case 1:case"end":return t.stop()}},u)})),e.apply(this,arguments)}function Z(u){return D.apply(this,arguments)}function D(){return D=f()(a()().mark(function u(s){return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,_.request)(r.g.apiUrl+"soft/tree",d()({method:"POST"},s||{})));case 1:case"end":return i.stop()}},u)})),D.apply(this,arguments)}function M(u,s){return p.apply(this,arguments)}function p(){return p=f()(a()().mark(function u(s,m){return a()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,_.request)(r.g.apiUrl+(s.status==1?"soft/pass":"soft/reject"),d()({method:"POST",data:s},m||{})));case 1:case"end":return t.stop()}},u)})),p.apply(this,arguments)}}}]);
