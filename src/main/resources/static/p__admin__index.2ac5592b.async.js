"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[34],{56380:function(te,M,e){e.r(M),e.d(M,{default:function(){return q}});var z=e(48305),p=e.n(z),K=e(90228),c=e.n(K),$=e(26068),o=e.n($),U=e(87999),D=e.n(U),Z=e(36982),S=e(47892);function G(s,a){return T.apply(this,arguments)}function T(){return T=D()(c()().mark(function s(a,u){return c()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,Z.request)(S.g.apiUrl+"admin/list",o()({method:"POST",data:o()(o()({},a),{},{pageNumber:a.current||1})},u||{})).then(function(l){return{success:!0,data:l.data.content,total:l.data.total}}));case 1:case"end":return r.stop()}},s)})),T.apply(this,arguments)}function N(s,a){return I.apply(this,arguments)}function I(){return I=D()(c()().mark(function s(a,u){var n;return c()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return n=o()({},a),n.rangeDate&&(n.beginDate=n.rangeDate[0].format("YYYY-MM-DD 00:00:00"),n.endDate=n.rangeDate[1].format("YYYY-MM-DD 23:59:59")),delete n.rangeDate,l.abrupt("return",(0,Z.request)(S.g.apiUrl+(a.id?"activity/update":"activity/save"),o()({method:"POST",data:n},u||{})));case 4:case"end":return l.stop()}},s)})),I.apply(this,arguments)}function H(s,a){return P.apply(this,arguments)}function P(){return P=D()(c()().mark(function s(a,u){return c()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,Z.request)(S.g.apiUrl+"activity/delete",o()({method:"POST",data:a},u||{})));case 1:case"end":return r.stop()}},s)})),P.apply(this,arguments)}var J=e(73973),L=e(95173),Q=e(3338),V=e(90926),g=e(19648),y=e(37593),f=e(91258),m=e(11653),F=e(31518),W=e(47492),X=e(5726),B=e.n(X),t=e(17976),k={labelCol:{span:4},wrapperCol:{span:20}},b=function(a){var u=a.open,n=a.values,r=a.onClose,l=m.Z.useForm(),x=p()(l,1),d=x[0];return(0,f.useEffect)(function(){d.setFieldsValue(n||{}),n&&d.setFieldsValue({rangeDate:[B()(n.beginDate),B()(n.endDate)]})},[]),(0,t.jsx)(V.Z,{destroyOnClose:!0,maskClosable:!1,open:u,title:"\u6DFB\u52A0\u6D3B\u52A8",onOk:function(){d.validateFields().then(function(R){N(R).then(function(v){v.code===0?(g.ZP.success(v.msg).then(),r()):g.ZP.error(v.msg).then()})})},onCancel:r,children:(0,t.jsxs)(m.Z,o()(o()({form:d},k),{},{children:[(0,t.jsx)(m.Z.Item,{name:"id",style:{display:"none"},children:(0,t.jsx)(F.Z,{})}),(0,t.jsx)(m.Z.Item,{label:"\u56FE\u7247",name:"image",rules:[{required:!0,message:"\u5FC5\u586B"}],children:(0,t.jsx)(F.Z,{})}),(0,t.jsx)(m.Z.Item,{label:"\u6807\u9898",name:"title",children:(0,t.jsx)(F.Z,{})}),(0,t.jsx)(m.Z.Item,{label:"\u6709\u6548\u65F6\u95F4",name:"rangeDate",rules:[{required:!0,message:"\u5FC5\u586B"}],children:(0,t.jsx)(W.default.RangePicker,{format:"YYYY-MM-DD 00:00:00"})})]}))})},w=b,q=function(){var s=(0,f.useRef)(),a=(0,f.useState)({}),u=p()(a,2),n=u[0],r=u[1],l=(0,f.useState)(!1),x=p()(l,2),d=x[0],j=x[1],R=(0,f.useState)([]),v=p()(R,2),Y=v[0],_=v[1],E=function(i){V.Z.confirm({title:"\u63D0\u9192",content:"\u60A8\u6B63\u5728\u5220\u9664\u6570\u636E",onOk:function(){H({ids:i||Y.join(",")}).then(function(h){if(h.code===0){var O;g.ZP.success(h.msg).then(),(O=s.current)===null||O===void 0||O.reload()}else g.ZP.error(h.msg).then()})}})},ee=[{title:"\u6807\u9898",dataIndex:"title"},{title:"\u5C01\u9762\u56FE",dataIndex:"image",valueType:"image",hideInSearch:!0},{title:"\u5F00\u59CB\u65F6\u95F4",dataIndex:"beginDate",width:150,valueType:"dateTime",hideInSearch:!0},{title:"\u7ED3\u675F\u65F6\u95F4",dataIndex:"endDate",width:150,valueType:"dateTime",hideInSearch:!0},{title:"\u6DFB\u52A0\u65F6\u95F4",dataIndex:"createdDate",hideInSearch:!0,width:150,valueType:"dateTime"},{title:"\u64CD\u4F5C",dataIndex:"opt",width:150,valueType:"option",render:function(i,A){return[(0,t.jsx)(y.ZP,{size:"small",type:"primary",onClick:function(){j(!0),r(A)},children:"\u4FEE\u6539"},"edit"),(0,t.jsx)(y.ZP,{size:"small",type:"primary",danger:!0,onClick:function(){return E(A.id)},children:"\u5220\u9664"},"remove")]}}];return(0,t.jsxs)(L._z,{title:!1,children:[(0,t.jsx)(Q.Z,{actionRef:s,options:!1,rowKey:"id",bordered:!0,search:!1,size:"small",tableAlertRender:!1,rowSelection:{selectedRowKeys:Y,onChange:function(i){return _(i)}},toolBarRender:function(){return[(0,t.jsxs)(y.ZP,{type:"primary",onClick:function(){return j(!0)},children:[(0,t.jsx)(J.Z,{})," \u65B0\u589E"]},"add"),(0,t.jsx)(y.ZP,{disabled:Y.length===0,type:"primary",danger:!0,onClick:function(){return E()},children:"\u5220\u9664"},"remove")]},request:G,columns:ee}),d?(0,t.jsx)(w,{values:n,open:d,onClose:function(){var i;j(!1),(i=s.current)===null||i===void 0||i.reload(),r({})}}):null]})}}}]);
